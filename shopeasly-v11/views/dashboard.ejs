<!-- Hero Section with Logo -->
<div class="dashboard-hero">
    <div class="dashboard-hero-bg"></div>
    <div class="dashboard-hero-content">
        <img src="https://storage.googleapis.com/onlyimagesfortj/for%20the%20app/Gemini_Generated_Image_v7wjc9v7wjc9v7wj.png" alt="ShopEasly Logo" class="logo-img-xl" />
        <h1 class="dashboard-title">Welcome to ShopEasly V11</h1>
        <p class="dashboard-subtitle">Your AI-powered inventory management system</p>
    </div>
</div>

<!-- Firestore Connection Status -->
<div style="margin-bottom: 2rem;">
    <% if (typeof stats !== 'undefined' && stats.firestoreConnected) { %>
        <div style="margin-top: 1rem; padding: 1rem; background-color: #22c55e30; color: var(--success); border-radius: var(--radius-md); border-left: 4px solid var(--success);">
            ‚úÖ Connected to Firestore (Project: <%= projectId %>)
        </div>
    <% } else { %>
        <div style="margin-top: 1rem; padding: 1rem; background-color: #ef444430; color: var(--error); border-radius: var(--radius-md); border-left: 4px solid var(--error);">
            ‚ùå Firestore Connection Error
            <% if (typeof error !== 'undefined') { %>
                <br><small><%= error %></small>
            <% } %>
            <br><small>Running in offline mode with local data</small>
        </div>
    <% } %>
</div>

<!-- Stats Grid -->
<div class="stats-grid">
    <div class="stat-card stat-card-glass">
        <h3>Total Orders</h3>
        <p style="color: var(--primary); font-size: 2rem; font-weight: 700;">
            <%= (typeof stats !== 'undefined') ? stats.totalOrders : orders.length %>
        </p>
    </div>
    <div class="stat-card stat-card-glass">
        <h3>Pending Orders</h3>
        <p style="color: #f59e0b; font-size: 2rem; font-weight: 700;">
            <%= (typeof stats !== 'undefined') ? stats.pendingOrders : 0 %>
        </p>
    </div>
    <div class="stat-card stat-card-glass">
        <h3>Processing</h3>
        <p style="color: #3b82f6; font-size: 2rem; font-weight: 700;">
            <%= (typeof stats !== 'undefined') ? stats.processingOrders : 0 %>
        </p>
    </div>
    <div class="stat-card stat-card-glass">
        <h3>Delivered</h3>
        <p style="color: #10b981; font-size: 2rem; font-weight: 700;">
            <%= (typeof stats !== 'undefined') ? stats.deliveredOrders : 0 %>
        </p>
    </div>
</div>

<!-- Main Content Grid -->
<div class="dashboard-grid">
    <!-- Recent Orders -->
    <div class="dashboard-card">
        <h2 style="margin-bottom: 1rem;">Recent Orders</h2>
        <div>
                <% if (orders.length > 0) { %>
                    <div class="table-wrapper">
                        <table>
                            <thead>
                                <tr>
                                    <th>Order ID</th>
                                    <th>Customer</th>
                                    <th>Product</th>
                                    <th>Status</th>
                                    <th>Date</th>
                                </tr>
                            </thead>
                            <tbody>
                                <% orders.slice(0, 5).forEach(order => { %>
                                <tr>
                                    <td><%= order.id ? order.id.substring(0, 8) + '...' : 'N/A' %></td>
                                    <td><%= order.customerName || 'N/A' %></td>
                                    <td><%= order.product || 'N/A' %></td>
                                    <td>
                                        <span class="status-badge <%= order.status === 'Delivered' ? 'status-completed' : order.status === 'Processing' ? 'status-in-production' : 'status-new' %>">
                                            <%= order.status || 'Pending' %>
                                        </span>
                                    </td>
                                    <td><%= order.date || (order.createdAt ? new Date(order.createdAt._seconds * 1000).toLocaleDateString() : 'N/A') %></td>
                                </tr>
                                <% }); %>
                            </tbody>
                        </table>
                    </div>
                <% } else { %>
                    <div class="empty-state-small">
                        <p>No orders found in Firestore. Start by creating your first order!</p>
                        <% if (typeof stats !== 'undefined' && stats.firestoreConnected) { %>
                            <small style="color: var(--text-secondary);">Connected to Firestore project: <%= projectId %></small>
                        <% } %>
                    </div>
                <% } %>
            </div>
        </div>

        <!-- AI Assistant Panel -->
        <div class="dashboard-card">
            <h2 style="margin-bottom: 1rem;">ü§ñ AI Assistant</h2>
            <p style="margin-bottom: 1.5rem; color: var(--text-secondary); line-height: 1.6;">
                Your AI-powered assistant is ready to help with inventory management, order processing, and business insights.
            </p>
            <div class="quick-actions">
                <a href="/easly" class="btn btn-primary" style="text-decoration: none;">Open AI Assistant</a>
                <a href="/voice-commands" class="btn btn-secondary" style="text-decoration: none;">Voice Commands</a>
            </div>
        </div>
    </div>

    <!-- Quick Actions -->
    <div class="dashboard-card" style="margin-top: 1.5rem;">
        <h2 style="margin-bottom: 1rem;">Quick Actions</h2>
        <div class="quick-actions">
            <a href="/orders" class="btn btn-primary" style="text-decoration: none;">üì¶ View All Orders</a>
            <a href="/orders/new" class="btn btn-primary" style="text-decoration: none; background-color: var(--success);">‚ûï Create New Order</a>
            <a href="/inventory" class="btn btn-secondary" style="text-decoration: none;">üìä Manage Inventory</a>
            <a href="/easly" class="btn btn-secondary" style="text-decoration: none;">ü§ñ AI Co-Pilot</a>
        </div>
    </div>


